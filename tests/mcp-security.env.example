# MCP Security Test Environment Configuration
# Copy this file to tests/test.env and configure as needed

# =============================================================================
# MCP Server Configuration for Security Testing
# =============================================================================

# MCP server URL (where your MCP server is running)
MCP_URL=http://localhost:8080/mcp
LEXICON_URL=http://localhost:8080

# =============================================================================  
# Authentication Testing (Optional)
# =============================================================================

# Set to 'true' to enable OAuth 2.1 authentication tests
# When disabled, tests will verify that auth is properly disabled
MCP_AUTH_ENABLED=false

# OAuth 2.1 Configuration (only needed if MCP_AUTH_ENABLED=true)
MCP_AUTH_SERVER_URL=https://your-auth-server.com
MCP_SERVER_CANONICAL_URI=https://your-mcp-server.com  
MCP_AUTH_CLIENT_ID=your-test-client-id
MCP_AUTH_CLIENT_SECRET=your-test-client-secret

# Enable dynamic client registration testing
MCP_AUTH_ALLOW_DYNAMIC_REGISTRATION=false

# Token validation settings for testing
MCP_AUTH_TOKEN_CACHE_TIME=300
MCP_AUTH_REQUIRE_AUDIENCE_VALIDATION=true
MCP_AUTH_MAX_TOKEN_AGE=3600

# =============================================================================
# Input Validation Testing
# =============================================================================

# Test environment (affects validation strictness)
NODE_ENV=development

# Test SAFE_MODE restrictions
SAFE_MODE=false

# =============================================================================
# FullStory Test Data (for validation tests)  
# =============================================================================

# Safe demo IDs for testing (do not use real production data)
TEST_FULLSTORY_USER_ID=demo_user_123
TEST_FULLSTORY_SESSION_ID=demo_session_456
TEST_FULLSTORY_PROFILE_ID=demo_profile_789

# =============================================================================
# Rate Limiting Configuration (affects security integration tests)
# =============================================================================

# Enable rate limiting for testing interaction with security features
RATE_LIMIT_ENABLED=true
RATE_LIMIT_MCP_MAX_REQUESTS=100
RATE_LIMIT_TOOL_MAX_REQUESTS=50
RATE_LIMIT_MCP_WINDOW_MS=60000
RATE_LIMIT_TOOL_WINDOW_MS=60000

# Use in-memory rate limiting for tests (not Redis)
RATE_LIMIT_USE_REDIS=false

# =============================================================================
# Test Behavior Configuration
# =============================================================================

# Test timeout in milliseconds
TEST_TIMEOUT=30000

# Enable verbose test output
TEST_VERBOSE=false

# Skip tests that require real external services
SKIP_EXTERNAL_TESTS=true

# =============================================================================  
# Security Test Scenarios
# =============================================================================

# Test SQL injection patterns (used in validation tests)
TEST_SQL_INJECTION_ENABLED=true

# Test XSS patterns (used in validation tests) 
TEST_XSS_ENABLED=true

# Test path traversal patterns (used in validation tests)
TEST_PATH_TRAVERSAL_ENABLED=true

# Test command injection patterns (used in validation tests)
TEST_COMMAND_INJECTION_ENABLED=true

# =============================================================================
# Mock OAuth Server Configuration (for testing without real OAuth)
# =============================================================================

# Use mock JWT tokens instead of real OAuth server
USE_MOCK_JWT=true

# Mock JWT issuer for testing
MOCK_JWT_ISSUER=https://mock-auth.example.com

# Mock JWT audience (should match your MCP server)
MOCK_JWT_AUDIENCE=http://localhost:8080


# =============================================================================
# Logging and Debugging
# =============================================================================

# Enable debug logging for security tests
MCP_DEBUG=false

# Log security validation details
SECURITY_TEST_DEBUG=false

# Log authentication details  
AUTH_TEST_DEBUG=false

# =============================================================================
# CI/CD Configuration
# =============================================================================

# Skip tests that require user interaction
CI_MODE=false

# Skip tests that require external network access
OFFLINE_MODE=false

# Skip long-running performance tests
SKIP_PERFORMANCE_TESTS=false
